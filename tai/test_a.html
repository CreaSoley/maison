<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coach Tai Jitsu â€“ 2e Dan</title>

<style>
body{margin:0;font-family:'Segoe UI',system-ui;
background:linear-gradient(to right,#ffecd2,#fcb69f)}
h1,h2,h3{text-align:center}
.container{max-width:1100px;margin:auto;padding:1rem}
.uv{background:linear-gradient(120deg,#84fab0,#8fd3f4);
border-radius:20px;padding:1rem;margin-bottom:1rem;
box-shadow:0 10px 20px rgba(0,0,0,.15)}
.exercise{background:#fff;border-radius:15px;
padding:.5rem;margin:.3rem 0;
display:flex;justify-content:space-between;align-items:center;
box-shadow:0 4px 10px rgba(0,0,0,.1)}
.exercise.done{text-decoration:line-through;opacity:.5}
.exercise.active{background:#ffe0f0}
button{border:none;border-radius:20px;padding:.4rem .8rem;
margin:.1rem;cursor:pointer;box-shadow:0 4px 8px rgba(0,0,0,.2)}
.progress{height:14px;background:#eee;border-radius:10px;overflow:hidden}
.progress div{height:100%;background:#84fab0;width:0%}
input[type=number]{width:70px}
</style>
</head>

<body>
<h1>ğŸ¥‹ Coach Tai Jitsu â€“ 2e Dan</h1>
<div class="container">

<h2>ğŸ·ï¸ SÃ©ance nommÃ©e</h2>
<input id="sessionName" placeholder="Nom de la sÃ©ance">
<button onclick="saveSession()">ğŸ’¾ Sauvegarder</button>
<select id="sessionSelect" onchange="loadSession()"></select>

<h2>ğŸ“‹ Banque dâ€™exercices</h2>
<div id="bank"></div>

<h2>ğŸ§© SÃ©lection</h2>
<div id="selection"></div>
<button onclick="clearSelection()">ğŸ—‘ï¸ Vider</button>
<button onclick="validateSelection()">âœ… Valider</button>

<h2>â±ï¸ SÃ©ance</h2>
<div id="sequence"></div>

<h2>ğŸ¯ Objectifs hebdomadaires par exercice</h2>
<div id="goals"></div>

<h2>ğŸ“Š Historique par exercice</h2>
<div id="exerciseHistory"></div>

</div>

<script>
/* ===== DONNÃ‰ES ===== */
const bankData=[
 {uv:'ğŸ¥‹ UV1 â€“ Kihon',items:['Kihon simple','EnchaÃ®nement','Cibles']},
 {uv:'ğŸŒ€ UV2 â€“ DÃ©placements',items:['Tai sabaki','Slow ippon','Ippon kumite']},
 {uv:'ğŸ“ UV3 â€“ Kata',items:['Slow kata','Kata nidan','BunkaÃ¯']},
 {uv:'âš™ï¸ UV4 â€“ Technique',items:['Shadow']},
 {uv:'ğŸ”¥ UV5&6 â€“ Randori',items:['Shadow randori']}
];

let selection=JSON.parse(localStorage.getItem('selection'))||[];
let sequence=JSON.parse(localStorage.getItem('sequence'))||[];
let sessions=JSON.parse(localStorage.getItem('sessions'))||{};
let history=JSON.parse(localStorage.getItem('history'))||[];
let goals=JSON.parse(localStorage.getItem('goals'))||{};

/* ===== RENDER ===== */
function render(){
 renderBank();renderSelection();renderSequence();
 renderSessions();renderGoals();renderHistory();
}
function renderBank(){
 const b=document.getElementById('bank');b.innerHTML='';
 bankData.forEach(u=>{
  const d=document.createElement('div');d.className='uv';
  d.innerHTML=`<h3>${u.uv}</h3>`;
  u.items.forEach(n=>{
   d.innerHTML+=`<div class="exercise">${n}
   <button onclick="add('${n}','${u.uv}')">â•</button></div>`;
  });b.appendChild(d);
 });
}
function renderSelection(){
 const s=document.getElementById('selection');s.innerHTML='';
 selection.forEach((e,i)=>{
  s.innerHTML+=`<div class="exercise">${e.name}
  <div>
  <button onclick="moveSel(${i},-1)">â¬†ï¸</button>
  <button onclick="moveSel(${i},1)">â¬‡ï¸</button>
  <button onclick="removeSel(${i})">âŒ</button>
  </div></div>`;
 });
}
function renderSequence(){
 const s=document.getElementById('sequence');s.innerHTML='';
 sequence.forEach((e,i)=>{
  s.innerHTML+=`<div class="exercise">
  ${e.name}
  <input type="range" min="1" max="60" value="${e.duration}"
  onchange="eDur(${i},this.value)"> ${e.duration} min</div>`;
 });
}
function renderSessions(){
 const sel=document.getElementById('sessionSelect');
 sel.innerHTML='<option>Charger une sÃ©ance</option>';
 Object.keys(sessions).forEach(n=>{
  sel.innerHTML+=`<option>${n}</option>`;
 });
}
function renderGoals(){
 const g=document.getElementById('goals');g.innerHTML='';
 Object.keys(goals).forEach(ex=>{
  const pct=Math.min(100,goals[ex].done/goals[ex].target*100);
  g.innerHTML+=`<div class="exercise">
  ${ex} (${goals[ex].done}/${goals[ex].target} min)
  <div class="progress"><div style="width:${pct}%"></div></div>
  </div>`;
 });
}
function renderHistory(){
 const h=document.getElementById('exerciseHistory');h.innerHTML='';
 const byEx={};
 history.forEach(e=>{
  byEx[e.name]=(byEx[e.name]||0)+e.duration;
 });
 Object.keys(byEx).forEach(n=>{
  h.innerHTML+=`<p>${n} : ${byEx[n]} min</p>`;
 });
}

/* ===== ACTIONS ===== */
function add(n,uv){selection.push({name:n,uv});save()}
function moveSel(i,d){const n=i+d;if(n<0||n>=selection.length)return;
 [selection[i],selection[n]]=[selection[n],selection[i]];save()}
function removeSel(i){selection.splice(i,1);save()}
function clearSelection(){selection=[];save()}
function validateSelection(){
 sequence=selection.map(e=>({...e,duration:5}));
 selection=[];save()
}
function eDur(i,v){sequence[i].duration=+v;save()}

/* ===== SESSIONS ===== */
function saveSession(){
 const name=document.getElementById('sessionName').value;
 if(!name)return;
 sessions[name]=sequence;
 save();
}
function loadSession(){
 const n=document.getElementById('sessionSelect').value;
 if(sessions[n]){sequence=sessions[n];save()}
}

/* ===== SAVE ===== */
function save(){
 localStorage.setItem('selection',JSON.stringify(selection));
 localStorage.setItem('sequence',JSON.stringify(sequence));
 localStorage.setItem('sessions',JSON.stringify(sessions));
 localStorage.setItem('history',JSON.stringify(history));
 localStorage.setItem('goals',JSON.stringify(goals));
 render();
}
render();
</script>
</body>
</html>
