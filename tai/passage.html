<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tai-Jitsu – Entraînement</title>

  <!-- ==================== CSS KAWAII ==================== -->
  <style>
  @font-face {
    font-family:"Spicy";
    src:url("Spicy Sale.ttf");
  }

  body{
    margin:0;
    background:#ffeef6; /* rose kawaii */
    font-family:Arial, sans-serif;
  }

  /* BANNIÈRE */
  header{
    background:black;
    color:white;
    padding:25px 10px;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:20px;
    box-shadow:0 4px 12px rgba(0,0,0,0.25);
  }
  header img{
    height:90px;
    filter:drop-shadow(0 0 4px rgba(255,255,255,0.5));
  }
  header h1{
    font-family:"Spicy";
    font-size:3rem;
    margin:0;
    letter-spacing:2px;
  }

  /* GRID PRINCIPAL */
  .grid-container{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(340px,1fr));
    gap:30px;
    padding:25px;
  }

  /* CARDS FLOTTA NTES */
  .card{
    background:white;
    border-radius:22px;
    padding:25px;
    box-shadow:0 8px 18px rgba(255,170,200,0.35);
    border:3px solid #ffd4e7;
    transition:transform .2s, box-shadow .2s;
  }
  .card:hover{
    transform:translateY(-4px);
    box-shadow:0 10px 20px rgba(255,150,200,0.45);
  }

  .card-title{
    display:flex;
    align-items:center;
    font-family:"Spicy";
    font-size:2rem;
    margin-bottom:20px;
    color:#ff69b4;
  }
  .card-title img{
    width:45px;
    margin-right:10px;
  }

  /* LIVRES → petits kimonos */
  .library{
    display:flex;
    justify-content:center;
    gap:18px;
    flex-wrap:wrap;
  }
  .kimono-btn{
    width:60px;
    height:60px;
    background:url("kimono.png") center/contain no-repeat;
    cursor:pointer;
    transition:transform .2s;
  }
  .kimono-btn:hover{
    transform:scale(1.10) rotate(-3deg);
  }

  /* HIIT SECTION STYLE */
  #hiit-section{
    background:#111;
    color:white;
    border-radius:18px;
    padding:25px;
    box-shadow:0 0 15px rgba(255,105,180,0.5);
  }
  #hiit-section h2{
    font-family:"Spicy";
    font-size:2.1rem;
  }
  .training-input{
    width:70px;
    padding:6px;
    border-radius:8px;
    border:none;
    text-align:center;
  }
  .training-button{
    padding:12px 25px;
    background:#ff7bbd;
    border:none;
    border-radius:12px;
    color:white;
    cursor:pointer;
    font-size:1.1rem;
    box-shadow:0 4px 8px rgba(255,150,200,0.4);
  }
  .training-button:hover{
    background:#ff5fae;
  }

  /* AGRANDIR ENCARDS SUR DESKTOP */
  @media(min-width:900px){
    .card{
      min-height:480px;
      font-size:1.15rem;
    }
  }

  </style>
</head>
<body>

<header>
  <img src="logo.png" alt="logo">
  <h1>Tai-Jitsu</h1>
</header>

<div class="grid-container">

  <!-- ==================== UV1 ==================== -->
  <div class="card" id="uv1">
    <div class="card-title"><img src="ceinture.png">UV1 – Kihon</div>
    <div id="kihon-techniques"></div>
    <hr>
    <button onclick="nouveauxEnchainements()" class="training-button">Nouveaux enchaînements</button>
    <div id="enchainements"></div>
    <hr>
    <div id="kihon-combat"></div>
  </div>

  <!-- ==================== UV2 + HIIT ==================== -->
  <div class="card" id="uv2">
    <div class="card-title"><img src="ceinture.png">UV2 – Ippon Kumite</div>

    <!-- HIIT -->
    <section id="hiit-section">
      <h2>Entraînement HIIT</h2>

      <div class="hiit-config" style="display:flex; gap:20px; justify-content:center; flex-wrap:wrap;">
        <label>Travail<br><input type="number" id="hiitWork" value="20" class="training-input"></label>
        <label>Repos<br><input type="number" id="hiitRest" value="10" class="training-input"></label>
        <label>Rounds<br><input type="number" id="hiitRounds" value="8" class="training-input"></label>
      </div>

      <div style="text-align:center;">
        <button id="hiitStart" class="training-button">Démarrer HIIT</button>
      </div>

      <div id="hiitDisplay" style="text-align:center; margin-top:20px; font-size:1.3em;">
        Round <span id="hiitRound">0</span>/<span id="hiitRoundTotal">0</span> —
        Phase : <span id="hiitPhase">-</span> —
        Temps : <span id="hiitTime">0</span>s
      </div>
    </section>
  </div>

  <!-- ==================== UV3 ==================== -->
  <div class="card">
    <div class="card-title"><img src="ceinture.png">UV3 – Kata</div>
    <ul>
      <li>Kata choisi</li>
      <li>Bunkaï 1 : oi tsuki – gyaku tsuki</li>
      <li>Bunkaï 2 : saisie des deux poignets</li>
    </ul>
  </div>

  <!-- ==================== UV4 ==================== -->
  <div class="card">
    <div class="card-title"><img src="ceinture.png">UV4 – Techniques de base</div>
    <ul>
      <li>Application par atemi</li>
      <li>Application par clé</li>
      <li>Application par projection</li>
    </ul>
  </div>

  <!-- ==================== UV5–6 Randori ==================== -->
  <div class="card">
    <div class="card-title"><img src="ceinture.png">UV5–6 – Randori</div>
    <div id="randori"></div>
  </div>

  <!-- ==================== Ressources ==================== -->
  <div class="card">
    <div class="card-title"><img src="ceinture.png">Ressources</div>
    <div class="library">
      <div class="kimono-btn" onclick="window.open('livre1.pdf')"></div>
      <div class="kimono-btn" onclick="window.open('livre2.pdf')"></div>
      <div class="kimono-btn" onclick="window.open('livre3.pdf')"></div>
      <div class="kimono-btn" onclick="window.open('livre4.pdf')"></div>
    </div>
  </div>

</div>

<!-- ==================== SCRIPTS ORIGINAUX – NON MODIFIÉS ==================== -->
<script>
/* ==== KIHON ==== */
async function chargerKihon(){
  const r = await fetch('tjkihon.json');
  const data = await r.json();
  const tirage = data.sort(()=>0.5-Math.random()).slice(0,3);
  document.getElementById('kihon-techniques').innerHTML =
    '<h3 class="spicy">Techniques du jour</h3>' +
    tirage.map(t=>`<div>• ${t.nom}</div>`).join('');
}

const ENCHAINEMENTS = [...];

function nouveauxEnchainements(){ ... }

function kihonCombat(){ ... }

/* ==== RANDORI ==== */
async function chargerRandori(){ ... }

chargerKihon();
kihonCombat();
chargerRandori();

/* ==== HIIT ==== */
class HIITTimer{ ... }

document.getElementById("hiitStart").addEventListener("click", () => {
  const work = +document.getElementById("hiitWork").value;
  const rest = +document.getElementById("hiitRest").value;
  const rounds = +document.getElementById("hiitRounds").value;

  const displayRound = document.getElementById("hiitRound");
  const displayTotal = document.getElementById("hiitRoundTotal");
  const displayPhase = document.getElementById("hiitPhase");
  const displayTime = document.getElementById("hiitTime");

  displayTotal.textContent = rounds;

  const hiit = new HIITTimer({
    work, rest, rounds,

    onTick: t=>{
      displayRound.textContent=t.currentRound;
      displayPhase.textContent=t.phase==="work"?"Travail":"Repos";
      displayTime.textContent=t.timeLeft;

      if([3,2,1].includes(t.timeLeft)) new Audio("beep.mp3").play();
      if(t.timeLeft===0) new Audio("silence.mp3").play();
    },

    onRoundChange: ()=> new Audio("ding.mp3").play(),
    onFinish: ()=> alert("HIIT terminé !")
  });

  hiit.start();
});
</script>

</body>
</html>
